(this.webpackJsonpproject3=this.webpackJsonpproject3||[]).push([[0],{26:function(e,t,a){},27:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a(3),o=a.n(n),r=a(19),i=a.n(r),c=(a(26),a(5)),l=a(6),d=a(8),u=a(7),m=(a(27),a(11)),h=a.n(m),p=a(13),v=a(20),b=(a(29),a(33),v.a.initializeApp({apiKey:"AIzaSyA6oAe0rOcK123FpMB8VFwJZ7IYjYHa050",authDomain:"project2-caa66.firebaseapp.com",databaseURL:"https://project2-caa66.firebaseio.com",projectId:"project2-caa66",storageBucket:"project2-caa66.appspot.com",messagingSenderId:"160603073424",appId:"1:160603073424:web:0467ce5bcbe9eb9aa9a115",measurementId:"G-8B370MRWDK"})),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dummy",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dummy",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"dummy",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"dummy";return{firstName:e,lastName:t,uid:a,roomCode:s}};function f(e){return b.database().ref("users/"+e.uid).set(e)}function g(e){return b.database().ref("users/"+e).once("value")}var x=function(){var e=Object(p.a)(h.a.mark((function e(t){var a,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],s=0;case 2:if(!(s<t.length)){e.next=8;break}return e.next=5,g(t[s]).then((function(e){e.val()&&a.push(e.val().firstName)}));case 5:s++,e.next=2;break;case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O={appName:"sham",min_players:3,hotString:"$"},y=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={firstName:{value:"",error:[]},lastName:{value:"",error:[]},email:{value:"",error:[]},password:{value:"",error:[]},confirmPassword:{value:"",error:[]}},e.handleFirstNameChange=function(t){var a=[];e.emptyFieldValidation(t)&&a.push(e.emptyFieldValidation(t)),e.setState({firstName:{value:t.target.value,error:a}})},e.handleLastNameChange=function(t){var a=[];e.emptyFieldValidation(t)&&a.push(e.emptyFieldValidation(t)),e.setState({lastName:{value:t.target.value,error:a}})},e.handleEmailChange=function(t){var a=[];e.emptyFieldValidation(t)&&a.push(e.emptyFieldValidation(t)),!e.validateEmail(t.target.value)&&t.target.value.length>0&&a.push("Not a valid E-mail"),e.setState({email:{value:t.target.value,error:a}})},e.handlePasswordChange=function(t){var a=[];e.emptyFieldValidation(t)&&a.push(e.emptyFieldValidation(t)),t.target.value.length<6&&a.push("Password should be at least 6 characters!"),e.setState({password:{value:t.target.value,error:a}})},e.handleConfirmPasswordChange=function(t){var a=[];e.emptyFieldValidation(t)&&a.push(e.emptyFieldValidation(t)),t.target.value!==e.state.password.value&&a.push("Passwords don't match!"),e.setState({confirmPassword:{value:t.target.value,error:a}})},e.handleSubmitClick=function(){var t=Object(p.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,e.handleFirstNameChange({target:{value:e.state.firstName.value}});case 3:return t.next=5,e.handleLastNameChange({target:{value:e.state.lastName.value}});case 5:return t.next=7,e.handleEmailChange({target:{value:e.state.email.value}});case 7:return t.next=9,e.handleConfirmPasswordChange({target:{value:e.state.confirmPassword.value}});case 9:return t.next=11,e.handlePasswordChange({target:{value:e.state.password.value}});case 11:if(0===e.state.firstName.error.length+e.state.lastName.error.length+e.state.email.error.length+e.state.password.error.length+e.state.confirmPassword.error.length){t.next=16;break}return t.abrupt("return",!1);case 16:b.auth().createUserWithEmailAndPassword(e.state.email.value,e.state.password.value).then((function(){var t,a=null===(t=b.auth().currentUser)||void 0===t?void 0:t.uid,s={uid:"",firstName:e.state.firstName.value,lastName:e.state.lastName.value,roomCode:"none"};void 0!==a&&(s.uid=a),f(s),e.props.onRegistered()})).catch((function(t){var a=e.state.confirmPassword.error;switch(t.code){case"auth/email-already-in-use":a.push("This e-mail is already in use. Please login to continue.");break;case"auth/network-request-failed":a.push("Unable to connect to the internet");break;default:a.push(t.code)}return e.setState({confirmPassword:{value:"",error:a}}),e.setState({password:{value:"",error:[]}}),null}));case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(a,[{key:"emptyFieldValidation",value:function(e){return""===e.target.value?"This field can't be empty":""}},{key:"validateEmail",value:function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}},{key:"render",value:function(){return Object(s.jsxs)("div",{className:"container",children:[Object(s.jsxs)("h1",{className:"m-2",children:["Welcome to ",O.appName,""!==this.state.firstName.value&&" ",this.state.firstName.value,"!"]}),Object(s.jsx)("hr",{}),Object(s.jsxs)("form",{className:"container",noValidate:!0,children:[Object(s.jsxs)("div",{className:"row",children:[Object(s.jsxs)("div",{className:"mt-2 form-group text-left col-md",children:[Object(s.jsx)("input",{value:this.state.firstName.value,className:"form-control",placeholder:"Enter First Name",onChange:this.handleFirstNameChange,required:!0}),this.state.firstName.error.map((function(e,t){return Object(s.jsx)("small",{className:"form-text text-danger",children:e},t)}))]}),Object(s.jsxs)("div",{className:"form-group text-left col-md mt-2",children:[Object(s.jsx)("input",{value:this.state.lastName.value,className:"form-control",placeholder:"Enter Last Name",onChange:this.handleLastNameChange,required:!0}),this.state.lastName.error.map((function(e,t){return Object(s.jsx)("small",{className:"form-text text-danger",children:e},t)}))]})]}),Object(s.jsxs)("div",{className:"form-group text-left",children:[Object(s.jsx)("input",{value:this.state.email.value,className:"form-control",type:"email",placeholder:"Enter Email",onChange:this.handleEmailChange,required:!0}),this.state.email.error.map((function(e,t){return Object(s.jsx)("small",{className:"form-text text-danger",children:e},t)}))]}),Object(s.jsxs)("div",{className:"row",children:[Object(s.jsxs)("div",{className:"form-group text-left col-md",children:[Object(s.jsx)("input",{className:"form-control",type:"password",placeholder:"Enter Password",onChange:this.handlePasswordChange,value:this.state.password.value,required:!0}),this.state.password.error.map((function(e,t){return Object(s.jsx)("small",{className:"form-text text-danger",children:e},t)}))]}),Object(s.jsxs)("div",{className:"form-group text-left col-md",children:[Object(s.jsx)("input",{className:"form-control",type:"password",value:this.state.confirmPassword.value,placeholder:"Confirm Password",onChange:this.handleConfirmPasswordChange,required:!0}),this.state.confirmPassword.error&&this.state.confirmPassword.error.map((function(e,t){return Object(s.jsx)("small",{className:"form-text text-danger",children:e},t)}))]})]}),Object(s.jsx)("input",{type:"submit",onClick:this.handleSubmitClick,className:"btn btn-primary",value:"Start"})]}),Object(s.jsx)("button",{className:"btn btn-link",onClick:this.props.registerToLogin,children:"Already Registered? Login Now!"})]})}}]),a}(n.Component),w=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={email:{value:"",error:[]},password:{value:"",error:[]}},e.handleEmailChange=function(t){var a=[];e.emptyFieldValidation(t)&&a.push(e.emptyFieldValidation(t)),!e.validateEmail(t.target.value)&&t.target.value.length>0&&a.push("Not a valid E-mail"),e.setState({email:{value:t.target.value,error:a}})},e.handlePasswordChange=function(t){var a=[];e.emptyFieldValidation(t)&&a.push(e.emptyFieldValidation(t)),e.setState({password:{value:t.target.value,error:a}})},e.handleLoginClick=function(){var t=Object(p.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,e.handleEmailChange({target:{value:e.state.email.value}});case 3:return t.next=5,e.handlePasswordChange({target:{value:e.state.password.value}});case 5:if(e.state.email.error.length+e.state.password.error.length===0){t.next=7;break}return t.abrupt("return",!1);case 7:b.auth().signInWithEmailAndPassword(e.state.email.value,e.state.password.value).then((function(){e.props.onLogin()})).catch((function(t){var a=e.state.password.error;switch(t.code){case"auth/wrong-password":a.push("Invalid Credentials!");break;default:a.push(t.message)}e.setState({password:{value:"",error:a}})}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(a,[{key:"emptyFieldValidation",value:function(e){return""===e.target.value?"This field can't be empty":""}},{key:"validateEmail",value:function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}},{key:"render",value:function(){return Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("h1",{children:"Welcome Back!"}),Object(s.jsxs)("form",{noValidate:!0,children:[Object(s.jsxs)("div",{className:"form-group text-left",children:[Object(s.jsx)("input",{value:this.state.email.value,className:"form-control",type:"email",required:!0,onChange:this.handleEmailChange,placeholder:"Enter Email"}),this.state.email.error.map((function(e,t){return Object(s.jsx)("small",{className:"form-text text-danger",children:e},t)}))]}),Object(s.jsxs)("div",{className:"form-group text-left",children:[Object(s.jsx)("input",{value:this.state.password.value,className:"form-control",type:"password",required:!0,onChange:this.handlePasswordChange,placeholder:"Enter Password"}),this.state.password.error.map((function(e,t){return Object(s.jsx)("small",{className:"form-text text-danger",children:e},t)}))]}),Object(s.jsx)("input",{className:"btn btn-primary",value:"Login",onClick:this.handleLoginClick,type:"submit"})]}),Object(s.jsx)("button",{className:"btn btn-link",onClick:this.props.loginToRegister,children:"New to Game? Register Now!"})]})}}]),a}(n.Component),C=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(s.jsxs)("div",{className:"container",children:[this.props.visibilities.registerCompVisibility&&Object(s.jsx)(y,{registerToLogin:this.props.registerToLogin,onRegistered:this.props.hasAuthenticated}),this.props.visibilities.loginCompVisibility&&Object(s.jsx)(w,{loginToRegister:this.props.loginToRegister,onLogin:this.props.hasAuthenticated})]})}}]),a}(n.Component),N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dummy",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],r=arguments.length>6&&void 0!==arguments[6]&&arguments[6],i=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"dummy",l=arguments.length>9&&void 0!==arguments[9]&&arguments[9],d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:[],u=arguments.length>11&&void 0!==arguments[11]&&arguments[11];return{host:e,participants:t,waiting:a,totalRounds:s,currentRound:n,allAnswersSubmitted:o,allAnswersPicked:r,allReadyForNextRound:i,code:c,questionBank:d,roundOver:l,waitingForPlayers:u}};function k(e){return"dummy"===e.code&&console.trace(),b.database().ref("rooms/"+e.code).set(e)}function R(e){return b.database().ref("rooms/"+e).once("value")}var S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dummy",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dummy",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return{answerText:e,submittedBy:t,selectedBy:a}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dummy",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S(),s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return{uid:e,score:t,currentAnswer:a,chosenAns:s,readyForNextRound:n}},P=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={joinGame:{value:"",error:[]},hostGame:{value:"",error:[]}},e.consonants=["b","c","d","f","g","h","j","k","l","m","n","p","q","r","s","t","v","w","x","y","z"],e.vowels=["a","e","i","o","u"],e.onHost=function(t){t.preventDefault();var a=e.randomGenerator();R(a).then((function(t){null===t.val()&&e.createRoom(a)})).catch((function(t){e.setState({hostGame:{value:"",error:[t.message]}})}))},e.createRoom=function(t){k(N(e.props.userCode,[A(e.props.userCode)],[],8,void 0,void 0,void 0,void 0,t)).then((function(){e.props.onRoomCreate(t)})).catch((function(t){e.setState({hostGame:{value:"",error:[t.message]}})}))},e.onCodeChange=function(t){e.setState({joinGame:{value:t.target.value,error:e.state.joinGame.error}})},e.joinRoom=function(t){t.preventDefault(),""!==e.state.joinGame.value?R(e.state.joinGame.value.toLowerCase()).then((function(t){if(t.val()){var a=t.val();e.props.onRoomJoined(a.code)}else{var s=[];s.push("Unable to find a game with that code"),e.setState({joinGame:{value:e.state.joinGame.value,error:s}})}})):e.setState({joinGame:{value:"",error:["This field can't be empty"]}})},e}return Object(l.a)(a,[{key:"randomGenerator",value:function(){var e=this.consonants[Math.floor(21*Math.random())],t=this.consonants[Math.floor(21*Math.random())],a=this.vowels[Math.floor(5*Math.random())],s=this.vowels[Math.floor(5*Math.random())],n=this.vowels[Math.floor(5*Math.random())];return e+a+t+s+this.consonants[Math.floor(21*Math.random())]+n}},{key:"render",value:function(){return Object(s.jsxs)("form",{className:"container",noValidate:!0,children:[Object(s.jsx)("h3",{className:"mb-4",children:"Enter Room Code"}),Object(s.jsxs)("div",{className:"form-group text-left",children:[Object(s.jsxs)("div",{className:"row ",children:[Object(s.jsx)("input",{className:"form-control mx-2 mt-2 col-md-9",onChange:this.onCodeChange,placeholder:"Room Code"}),Object(s.jsx)("input",{value:"Join Room",type:"submit",className:"btn btn-secondary mx-2 mt-2 col-md-2",onClick:this.joinRoom})]}),this.state.joinGame.error.map((function(e,t){return Object(s.jsx)("small",{className:"form-text text-danger",children:e},t)}))]}),Object(s.jsx)("h5",{className:"my-4",children:"or"}),Object(s.jsx)("button",{className:"btn btn-primary",onClick:this.onHost,children:"Host your own game!"}),this.state.hostGame.error.map((function(e,t){return Object(s.jsx)("small",{className:"form-text text-danger",children:e},t)}))]})}}]),a}(n.Component),B=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(s.jsx)("div",{className:"container",children:Object(s.jsx)("h1",{className:"h1 font-weight-light container",children:this.props.children})})}}]),a}(n.Component),F=a(9),M=a(18),T=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={room:N(),user:j(),participant:A()},e.mounted=!1,e.participantReady=function(){var t=e.state.room;t.allReadyForNextRound=!0;var a,s=Object(F.a)(t.participants);try{for(s.s();!(a=s.n()).done;){var n=a.value;n.uid===e.props.userCode?n.readyForNextRound=!0:n.readyForNextRound||(t.allReadyForNextRound=!1)}}catch(o){s.e(o)}finally{s.f()}t.allReadyForNextRound&&e.props.newRound(),k(t)},e.newGame=function(){var t=e.state.room;t.currentRound=0,t.roundOver=!1,k(t)},e}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,b.database().ref("/rooms/"+this.props.roomCode).on("value",(function(t){if(e.mounted){var a=t.val();if(a){var s,n=Object(F.a)(a.participants);try{for(n.s();!(s=n.n()).done;){var o=s.value;o.uid===e.props.userCode&&e.setState({participant:o})}}catch(r){n.e(r)}finally{n.f()}e.setState({room:t.val()})}}})),b.database().ref("/users/"+this.props.userCode).on("value",(function(t){e.mounted&&t.val()&&e.setState({user:t.val()})}))}},{key:"render",value:function(){return Object(s.jsxs)("div",{className:"container",children:["dummy"!==this.state.room.code&&0===this.state.room.currentRound&&this.state.room.participants.length<O.min_players&&Object(s.jsxs)("h4",{className:"text-secondary font-weight-light m-2",children:[O.min_players-this.state.room.participants.length," more player",O.min_players-1!==this.state.room.participants.length&&"s"," ","needed to start"]}),"dummy"!==this.state.room.code&&0===this.state.room.currentRound&&this.state.user.uid!==this.state.room.host&&this.state.room.participants.length>=O.min_players&&Object(s.jsx)("h4",{className:"text-secondary font-weight-light m-2",children:"Waiting for host to start the game."}),"dummy"!==this.state.room.code&&this.state.user.uid===this.state.room.host&&0===this.state.room.currentRound&&Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"button",className:"btn btn-primary m-2",disabled:this.state.room.participants.length<O.min_players,onClick:this.props.startGame,children:"Start Game"})}),"dummy"!==this.state.room.code&&this.state.room.allAnswersPicked&&!this.state.room.allReadyForNextRound&&!this.state.participant.readyForNextRound&&Object(s.jsx)("div",{children:Object(s.jsx)("button",{className:"btn btn-success m-2",onClick:this.participantReady,children:"Next Round"})}),"dummy"!==this.state.room.code&&this.state.room.roundOver&&this.state.user.uid===this.state.room.host&&Object(s.jsx)("div",{children:Object(s.jsx)("button",{className:"btn btn-success m-2",onClick:this.newGame,children:"New Game"})}),"dummy"!==this.state.room.code&&this.state.room.roundOver&&this.state.user.uid!==this.state.room.host&&Object(s.jsx)("h4",{className:"text-secondary font-weight-light m-2",children:"Waiting for host to start another round."}),"dummy"!==this.state.room.code&&this.state.room.waitingForPlayers&&Object(s.jsx)("h4",{className:"text-secondary font-weight-light m-2",children:"Round terminated because of lack of players. Waiting for players."}),"dummy"!==this.state.room.code&&this.state.user.uid===this.state.room.host&&Object(s.jsx)("div",{children:Object(s.jsx)("button",{className:"btn btn-danger m-2",onClick:this.props.deleteRoom,children:"Delete Room"})}),"dummy"!==this.state.room.code&&this.state.user.uid!==this.state.room.host&&Object(s.jsx)("div",{children:Object(s.jsx)("button",{className:"btn btn-danger m-2",onClick:this.props.leaveRoom,children:"Leave Room"})})]})}}]),a}(n.Component),V=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={user:j(),room:N(),participant:A()},e.mounted=!1,e.kick=function(){R(e.props.roomCode).then((function(t){if(t.val()){var a=t.val();a.participants=a.participants.filter((function(t){return t.uid!==e.props.userCode})),k(a)}}))},e}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,b.database().ref("/users/"+this.props.userCode).on("value",(function(t){if(e.mounted){var a=t.val();a&&e.setState({user:a})}})),b.database().ref("/rooms/"+this.props.roomCode).on("value",(function(t){if(e.mounted){var a=t.val();if(a)for(var s in e.setState({room:a}),a.participants)a.participants[s].uid===e.props.userCode&&e.setState({participant:a.participants[s]})}}))}},{key:"render",value:function(){return Object(s.jsxs)("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("span",{className:"badge badge-primary badge-pill m-1",children:this.props.index+1}),Object(s.jsx)("span",{className:"h4 m-1",children:"dummy"===this.state.user.firstName?"loading...":this.state.user.firstName}),Object(s.jsx)("span",{className:"badge badge-info m-1",children:this.props.userCode===this.props.currUserCode&&"You"}),Object(s.jsx)("span",{className:"badge badge-secondary m-1",children:this.props.userCode===this.props.host&&"Host"})]}),Object(s.jsxs)("div",{children:["postAnswer"===this.props.children&&Object(s.jsx)("span",{children:"dummy"===this.state.participant.currentAnswer.submittedBy?Object(s.jsx)("svg",{width:"1.5em",height:"1.5em",viewBox:"0 0 16 16",className:"bi bi-clock-fill",fill:"#ffbf00",xmlns:"http://www.w3.org/2000/svg",children:Object(s.jsx)("path",{fillRule:"evenodd",d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"})}):Object(s.jsx)("svg",{width:"1.5em",height:"1.5em",viewBox:"0 0 16 16",className:"bi bi-check-circle-fill",fill:"MediumSeaGreen",xmlns:"http://www.w3.org/2000/svg",children:Object(s.jsx)("path",{fillRule:"evenodd",d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"})})}),"postAnswerPick"===this.props.children&&Object(s.jsx)("span",{children:this.state.participant.chosenAns?Object(s.jsx)("svg",{width:"1.5em",height:"1.5em",viewBox:"0 0 16 16",className:"bi bi-check-circle-fill",fill:"MediumSeaGreen",xmlns:"http://www.w3.org/2000/svg",children:Object(s.jsx)("path",{fillRule:"evenodd",d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"})}):Object(s.jsx)("svg",{width:"1.5em",height:"1.5em",viewBox:"0 0 16 16",className:"bi bi-clock-fill",fill:"#ffbf00",xmlns:"http://www.w3.org/2000/svg",children:Object(s.jsx)("path",{fillRule:"evenodd",d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"})})}),"postReady"===this.props.children&&Object(s.jsx)("span",{children:this.state.participant.readyForNextRound?Object(s.jsx)("svg",{width:"1.5em",height:"1.5em",viewBox:"0 0 16 16",className:"bi bi-check-circle-fill",fill:"MediumSeaGreen",xmlns:"http://www.w3.org/2000/svg",children:Object(s.jsx)("path",{fillRule:"evenodd",d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"})}):Object(s.jsx)("svg",{width:"1.5em",height:"1.5em",viewBox:"0 0 16 16",className:"bi bi-clock-fill",fill:"#ffbf00",xmlns:"http://www.w3.org/2000/svg",children:Object(s.jsx)("path",{fillRule:"evenodd",d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"})})}),"waitingLounge"===this.props.children&&Object(s.jsx)("span",{children:Object(s.jsx)("svg",{width:"1.5em",height:"1.5em",viewBox:"0 0 16 16",className:"bi bi-clock-fill",fill:"#ffbf00",xmlns:"http://www.w3.org/2000/svg",children:Object(s.jsx)("path",{fillRule:"evenodd",d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"})})}),this.props.currUserCode===this.props.host&&this.props.userCode!==this.props.host&&Object(s.jsx)("span",{className:"btn btn-sm btn-danger m-1",onClick:this.kick,children:"Kick"})]})]})}}]),a}(n.Component),q=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={room:N(),user:j(),totalRounds:8},e.mounted=!0,e.handleDecrement=function(){1!==e.state.totalRounds&&(e.props.changeTotalRounds(e.state.totalRounds-1),e.setState({totalRounds:e.state.totalRounds-1}))},e.handleIncrement=function(){e.props.changeTotalRounds(e.state.totalRounds+1),e.setState({totalRounds:e.state.totalRounds+1})},e}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"componentDidMount",value:function(){var e=this;b.database().ref("/rooms/"+this.props.roomCode).on("value",(function(t){if(t.val()){var a=t.val();if(a.participants.some((function(t){return t.uid===e.props.userCode}))||a.hasOwnProperty("waiting")&&a.waiting.some((function(t){return t.uid===e.props.userCode}))||e.props.leaveRoom(),!e.mounted)return;e.setState({room:t.val()})}})),b.database().ref("/users/"+this.props.userCode).on("value",(function(t){if(t.val()){if(!e.mounted)return;e.setState({user:t.val()})}}))}},{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{className:"container",children:["dummy"!==this.state.room.code&&Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("i",{children:"Room Code: "}),Object(s.jsx)("h1",{className:"display-3",children:this.state.room.code}),Object(s.jsx)("hr",{}),this.state.room.host===this.state.user.uid&&0===this.state.room.currentRound&&Object(s.jsxs)("div",{className:"m-3 h4 font-weight-light",children:["Total Rounds:",Object(s.jsx)("button",{className:"btn btn-sm btn-danger m-2",onClick:this.handleDecrement,children:"-"}),Object(s.jsx)("span",{className:"m-2 h3",children:this.state.totalRounds}),Object(s.jsx)("button",{className:"btn btn-sm btn-success m-2",onClick:this.handleIncrement,children:"+"})]}),Object(s.jsx)("div",{id:"participants",className:"text-left",children:Object(s.jsxs)("div",{className:"list-group",children:[Object(s.jsx)("div",{className:"list-group-item active",children:"Participants:"}),this.state.room.participants.map((function(t,a){return Object(s.jsx)(V,{index:a,userCode:t.uid,roomCode:e.props.roomCode,currUserCode:e.props.userCode,host:e.state.room.host,children:"preGame"},t.uid)}))]})})]}),"dummy"===this.state.room.code?Object(s.jsx)(B,{children:"joining room"}):Object(s.jsx)("hr",{className:"m-3"})]})}}]),a}(n.Component),L=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={loaded:!1,answer:"",room:N()},e.mounted=!1,e.onAnswerChange=function(t){e.setState({answer:t.target.value})},e.handleSubmit=function(){var t=S(e.state.answer,e.props.userCode),a=e.state.room;a.questionBank[e.state.room.currentRound-1].answers?a.questionBank[e.state.room.currentRound-1].answers.push(t):a.questionBank[e.state.room.currentRound-1].answers=[t];var s=!0;for(var n in a.participants)a.participants[n].uid===e.props.userCode?a.participants[n].currentAnswer=t:"dummy"===a.participants[n].currentAnswer.answerText&&(s=!1);a.allAnswersSubmitted=s,k(a)},e}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,b.database().ref("/rooms/"+this.props.roomCode).on("value",(function(t){if(e.mounted){var a=t.val();e.setState({room:a,loaded:!a.questionBank[a.currentRound-1].questionText.includes(O.hotString)})}}))}},{key:"render",value:function(){return Object(s.jsx)("div",{className:"container",children:this.state.loaded?Object(s.jsxs)("div",{children:[Object(s.jsxs)("span",{className:"badge badge-primary badge-pill",children:["Round:",this.state.room.currentRound]}),Object(s.jsx)("span",{className:"font-weight-light m-2 h3",children:this.state.room.questionBank[this.state.room.currentRound-1].questionText}),Object(s.jsx)("textarea",{onChange:this.onAnswerChange,className:"form-control m-2",placeholder:"Your answer",maxLength:10}),Object(s.jsx)("button",{className:"btn btn-primary m-2",onClick:this.handleSubmit,children:"Submit Answer"})]}):Object(s.jsx)(B,{children:"loading question"})})}}]),a}(n.Component),D=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={room:N()},e.mounted=!1,e}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,b.database().ref("/rooms/"+this.props.roomCode).on("value",(function(t){if(e.mounted){var a=t.val();a&&e.setState({room:a})}}))}},{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{className:"container",children:["dummy"!==this.state.room.code&&Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("i",{children:"Room Code: "}),Object(s.jsx)("h1",{className:"display-3",children:this.state.room.code}),Object(s.jsx)("hr",{}),Object(s.jsxs)("div",{id:"participants",className:"text-center",children:[Object(s.jsxs)("div",{className:"list-group text-left",children:[Object(s.jsx)("div",{className:"list-group-item active",children:"Participants:"}),this.state.room.participants.map((function(t,a){return Object(s.jsx)(V,{index:a,userCode:t.uid,roomCode:e.props.roomCode,currUserCode:e.props.userCode,host:e.state.room.host,children:"postAnswer"},t.uid)}))]}),Object(s.jsx)("div",{className:"font-weight-light h4 m-3",children:"Waiting for all players to submit their answers."})]})]}),"dummy"===this.state.room.code?Object(s.jsx)(B,{children:"submitting answer"}):Object(s.jsx)("hr",{className:"m-3"})]})}}]),a}(n.Component),W=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={room:N(),classes:""},e.mounted=!1,e.handleClick=function(t){t.preventDefault();var a,s=e.state.room,n=Object(F.a)(s.questionBank[s.currentRound-1].answers);try{for(n.s();!(a=n.n()).done;){var o=a.value;o.submittedBy===e.props.answer.submittedBy&&(o.selectedBy?o.selectedBy.push(e.props.userCode):o.selectedBy=[e.props.userCode])}}catch(v){n.e(v)}finally{n.f()}s.allAnswersPicked=!0;var r,i=Object(F.a)(s.participants);try{for(i.s();!(r=i.n()).done;){var c=r.value;c.uid===e.props.userCode?c.chosenAns=!0:c.chosenAns||(s.allAnswersPicked=!1)}}catch(v){i.e(v)}finally{i.f()}if(s.allAnswersPicked){var l,d=Object(F.a)(s.questionBank[s.currentRound-1].answers);try{for(d.s();!(l=d.n()).done;){var u,m=l.value,h=Object(F.a)(s.participants);try{for(h.s();!(u=h.n()).done;){var p=u.value;p.uid===m.submittedBy&&m.hasOwnProperty("selectedBy")&&(p.score+=m.selectedBy.length*m.selectedBy.length)}}catch(v){h.e(v)}finally{h.f()}}}catch(v){d.e(v)}finally{d.f()}}s.participants.sort((function(e,t){return t.score-e.score})),k(s)},e}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,this.props.animatingIndex<this.props.index&&this.setState({classes:"d-none"}),this.props.animatingIndex===this.props.index&&this.setState({classes:"answerCard"}),b.database().ref("/rooms/"+this.props.roomCode).on("value",(function(t){if(e.mounted){var a=t.val();a&&e.setState({room:a})}}))}},{key:"render",value:function(){return Object(s.jsx)("div",{className:this.state.classes,onAnimationEnd:this.props.incrementAnimatingIndex,children:"dummy"!==this.state.room.code?Object(s.jsx)("button",{onClick:this.handleClick,className:"list-group-item list-group-item-action btn btn-link d-flex justify-content-between align-items-center",children:this.props.answer.answerText}):Object(s.jsx)("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:"loading"})})}}]),a}(n.Component),G=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={user:j(),room:N(),participant:A(),animatingIndex:0},e.mounted=!1,e.incrementAnimatingIndex=function(){e.setState({animatingIndex:e.state.animatingIndex+1})},e}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,b.database().ref("/users/"+this.props.userCode).on("value",(function(t){if(e.mounted){var a=t.val();a&&e.setState({user:a})}})),b.database().ref("/rooms/"+this.props.roomCode).on("value",(function(t){if(e.mounted){var a=t.val();if(a&&(a.questionBank[a.currentRound-1].answers=a.questionBank[a.currentRound-1].answers.filter((function(t){return t.submittedBy!==e.props.userCode})),e.setState({room:a}),"dummy"===e.state.participant.uid))for(var s in a.participants)a.participants[s].uid===e.props.userCode&&e.setState({participant:a.participants[s]})}}))}},{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{children:["dummy"!==this.state.room.code&&Object(s.jsx)("div",{id:"participants",className:"text-left",children:Object(s.jsxs)("div",{className:"list-group",children:[Object(s.jsx)("div",{className:"list-group-item active",children:"Pick an Answer:"}),this.state.room.questionBank[this.state.room.currentRound-1].answers.map((function(t,a){if(t.submittedBy!==e.state.user.uid)return Object(s.jsx)(W,{incrementAnimatingIndex:e.incrementAnimatingIndex,index:a,roomCode:e.props.roomCode,answer:t,userCode:e.props.userCode,animatingIndex:e.state.animatingIndex},t.submittedBy+e.state.animatingIndex.toString())}))]})}),"dummy"===this.state.room.code?Object(s.jsx)(B,{children:"loading answers"}):Object(s.jsx)("hr",{className:"m-3"})]})}}]),a}(n.Component),U=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={room:N()},e.mounted=!1,e}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,b.database().ref("/rooms/"+this.props.roomCode).on("value",(function(t){if(e.mounted){var a=t.val();a&&e.setState({room:a})}}))}},{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{className:"container",children:["dummy"!==this.state.room.code&&Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("i",{children:"Room Code: "}),Object(s.jsx)("h1",{className:"display-3",children:this.state.room.code}),Object(s.jsx)("hr",{}),Object(s.jsxs)("div",{id:"participants",className:"text-center",children:[Object(s.jsxs)("div",{className:"list-group text-left",children:[Object(s.jsx)("div",{className:"list-group-item active",children:"Participants:"}),this.state.room.participants.map((function(t,a){return Object(s.jsx)(V,{index:a,userCode:t.uid,roomCode:e.props.roomCode,currUserCode:e.props.userCode,host:e.state.room.host,children:"postAnswerPick"},t.uid)}))]}),Object(s.jsx)("div",{className:"font-weight-light h4 m-3",children:"Waiting for all players to pick an answer."})]})]}),"dummy"===this.state.room.code?Object(s.jsx)(B,{children:"submitting answer"}):Object(s.jsx)("hr",{className:"m-3"})]})}}]),a}(n.Component),I=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={user:j(),room:N(),participant:A(),answer:S(),answerPickedBy:[]},e.mounted=!1,e.participantAnswer=function(t,a){var s,n=Object(F.a)(a.questionBank[a.currentRound-1].answers);try{for(n.s();!(s=n.n()).done;){var o=s.value;if(o.submittedBy===t.uid){if(!e.mounted)return;e.setState({answer:o}),o.hasOwnProperty("selectedBy")&&x(o.selectedBy).then((function(t){e.mounted&&e.setState({answerPickedBy:t})}))}}}catch(r){n.e(r)}finally{n.f()}},e}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,b.database().ref("/users/"+this.props.userCode).on("value",(function(t){if(e.mounted){var a=t.val();a&&e.setState({user:a})}})),b.database().ref("/rooms/"+this.props.roomCode).on("value",(function(t){if(e.mounted){var a=t.val();if(a){e.setState({room:a});var s,n=Object(F.a)(a.participants);try{for(n.s();!(s=n.n()).done;){var o=s.value;o.uid===e.props.userCode&&(e.setState({participant:o}),a.questionBank[a.currentRound-1].answers&&e.participantAnswer(o,a))}}catch(r){n.e(r)}finally{n.f()}}}}))}},{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{className:"list-group-item d-flex flex-wrap justify-content-between align-items-center",children:[Object(s.jsx)("div",{className:"badge badge-primary badge-pill m-1",children:this.props.index+1}),Object(s.jsxs)("div",{className:"text-left mx-2 flex-grow-1 font-weight-light",children:[Object(s.jsx)("div",{className:"h4 m-1",children:"dummy"===this.state.user.firstName?"loading...":this.state.user.firstName}),"submitted"," ",Object(s.jsx)("span",{className:"badge-light badge badge-pill",children:this.state.answer.answerText})," ","which was picked by"," ","dummy"!==this.state.user.uid&&0===this.state.answerPickedBy.length&&"no-one.",this.state.answerPickedBy.map((function(t,a){var n=e.state.answerPickedBy.length,o="";return n-1===a?1!==n&&(o=" and "):0!==a&&(o=", "),Object(s.jsxs)("span",{children:[o,Object(s.jsx)("span",{className:"badge badge-info badge-pill m-1",children:t})]},a)}))]}),Object(s.jsxs)("span",{children:["Score:",Object(s.jsx)("span",{className:"badge badge-info badge-pill m-1",children:this.state.participant.score})]})]})}}]),a}(n.Component),E=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={room:N(),user:j(),participant:A(),answerPickedBy:[],answerPickedOf:""},e.mounted=!1,e}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,b.database().ref("/rooms/"+this.props.roomCode).on("value",(function(t){if(e.mounted){var a=t.val();if(a){var s,n=Object(F.a)(a.participants);try{for(n.s();!(s=n.n()).done;){var o=s.value;o.uid===e.props.userCode&&e.setState({participant:o})}}catch(l){n.e(l)}finally{n.f()}if(a.questionBank[a.currentRound-1].answers){var r,i=Object(F.a)(a.questionBank[a.currentRound-1].answers);try{for(i.s();!(r=i.n()).done;){var c=r.value;c.hasOwnProperty("selectedBy")&&c.submittedBy===e.props.userCode&&x(c.selectedBy).then((function(t){e.mounted&&e.setState({answerPickedBy:t})})),c.hasOwnProperty("selectedBy")&&c.selectedBy.includes(e.props.userCode)&&x([e.props.userCode]).then((function(t){e.mounted&&e.setState({answerPickedOf:t[0]})}))}}catch(l){i.e(l)}finally{i.f()}}e.setState({room:t.val()})}}})),b.database().ref("/users/"+this.props.userCode).on("value",(function(t){e.mounted&&t.val()&&e.setState({user:t.val()})}))}},{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{children:[""!==this.state.answerPickedOf&&Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"h3 font-weight-light",children:["You Picked"," ",Object(s.jsx)("span",{className:"badge badge-warning badge-pill",children:this.state.answerPickedOf}),"'s answer!"]}),this.state.answerPickedBy.length>0&&Object(s.jsxs)("div",{className:"h3 font-weight-light",children:["Your Answer was picked by"," ",this.state.answerPickedBy.map((function(t,a){var n=e.state.answerPickedBy.length,o="";return n-1===a?1!==n&&(o=" and "):0!==a&&(o=", "),Object(s.jsxs)("span",{children:[o,Object(s.jsx)("span",{className:"badge badge-info badge-pill m-1",children:t})]},a)}))]}),0===this.state.answerPickedBy.length&&Object(s.jsx)("div",{children:"No-one picked your answer:("})]}),Object(s.jsxs)("div",{className:"list-group",children:[Object(s.jsx)("div",{className:"list-group-item active",children:"Scoreboard:"}),this.state.room.participants.map((function(t,a){return Object(s.jsx)(I,{index:a,userCode:t.uid,roomCode:e.props.roomCode},t.uid)}))]}),""===this.state.answerPickedOf&&Object(s.jsx)(B,{children:"loading scoreboard"})]})}}]),a}(n.Component),z=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={room:N()},e.mounted=!1,e}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,b.database().ref("/rooms/"+this.props.roomCode).on("value",(function(t){if(e.mounted){var a=t.val();a&&e.setState({room:a})}}))}},{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{className:"container",children:["dummy"!==this.state.room.code&&Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("i",{children:"Room Code: "}),Object(s.jsx)("h1",{className:"display-3",children:this.state.room.code}),Object(s.jsx)("hr",{}),Object(s.jsxs)("div",{id:"participants",className:"text-center",children:[Object(s.jsxs)("div",{className:"list-group text-left",children:[Object(s.jsx)("div",{className:"list-group-item active",children:"Participants:"}),this.state.room.participants.map((function(t,a){return Object(s.jsx)(V,{index:a,userCode:t.uid,roomCode:e.props.roomCode,currUserCode:e.props.userCode,host:e.state.room.host,children:"postReady"},t.uid)}))]}),Object(s.jsx)("div",{className:"font-weight-light h4 m-3",children:"Waiting for all players to be ready for next round."})]})]}),"dummy"===this.state.room.code?Object(s.jsx)(B,{children:"submitting answer"}):Object(s.jsx)("hr",{className:"m-3"})]})}}]),a}(n.Component),J=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={room:N(),winners:[]},e.mounted=!1,e}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,b.database().ref("/rooms/"+this.props.roomCode).on("value",(function(t){if(e.mounted){var a=t.val();if(a){e.setState({room:a});var s,n=[],o=Object(F.a)(a.participants);try{for(o.s();!(s=o.n()).done;){var r=s.value;r.score===a.participants[0].score&&n.push(r.uid)}}catch(i){o.e(i)}finally{o.f()}x(n).then((function(t){e.mounted&&e.setState({winners:t})}))}}}))}},{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{children:[this.state.winners.length>0&&Object(s.jsxs)("div",{className:"h1",children:[Object(s.jsx)("div",{className:"h1 m-4 font-weight-light",children:1===this.state.winners.length?"Winner:":"Winners:"}),this.state.winners.map((function(t,a){var n=e.state.winners.length,o="";return n-1===a?1!==n&&(o=" and "):0!==a&&(o=", "),Object(s.jsxs)("span",{children:[o,Object(s.jsx)("span",{className:"badge badge-info badge-pill m-1",children:t},a)]},a)}))]}),Object(s.jsx)("hr",{className:"m-3"})]})}}]),a}(n.Component),_=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={room:N(),user:j()},e.mounted=!0,e}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"componentDidMount",value:function(){var e=this;b.database().ref("/rooms/"+this.props.roomCode).on("value",(function(t){t.val()&&e.setState({room:t.val()})})),b.database().ref("/users/"+this.props.userCode).on("value",(function(t){if(t.val()){if(!e.mounted)return;e.setState({user:t.val()})}}))}},{key:"render",value:function(){var e=this;return Object(s.jsx)("div",{className:"container",children:"dummy"!==this.state.room.code&&Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("i",{children:"Room Code: "}),Object(s.jsx)("h1",{className:"display-3",children:this.state.room.code}),Object(s.jsx)("hr",{}),Object(s.jsxs)("div",{id:"participants",className:"text-center",children:[Object(s.jsxs)("div",{className:"list-group text-left",children:[Object(s.jsx)("div",{className:"list-group-item active",children:"Waiting Lounge:"}),this.state.room.waiting.map((function(t,a){return Object(s.jsx)(V,{index:a,userCode:t.uid,roomCode:e.props.roomCode,currUserCode:e.props.userCode,host:e.state.room.host,children:"waitingLounge"},t.uid)}))]}),Object(s.jsx)("div",{className:"font-weight-light h4 m-3",children:"Waiting for the next round to begin."})]})]})})}}]),a}(n.Component),Q=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).mounted=!1,e.state={room:N(),participant:A(),totalRounds:8,waiting:!1},e.randomSelector=function(e,t){for(var a=[];a.length!==t;){var s=Math.floor(Math.random()*e.length);e.length<t?a.push(e[s].uid):a.includes(e[s].uid)||a.push(e[s].uid)}return a},e.plugIn=function(e,t,a){for(var s=0;s<e.length;s++)t=t.replace(O.hotString,e[s]);a.questionBank[a.currentRound-1].questionText=t,k(a)},e.newRound=function(){var t,a=e.state.room;(a.allReadyForNextRound=!1,a.allAnswersPicked=!1,a.allAnswersSubmitted=!1,a.hasOwnProperty("waiting"))&&((t=a.participants).push.apply(t,Object(M.a)(a.waiting)),a.waiting=[]);var s,n=Object(F.a)(a.participants);try{for(n.s();!(s=n.n()).done;){var o=s.value;o.readyForNextRound=!1,o.chosenAns=!1,o.currentAnswer=S()}}catch(i){n.e(i)}finally{n.f()}if(a.currentRound!==a.totalRounds){a.currentRound++;var r=e.randomSelector(a.participants,a.questionBank[a.currentRound-1].slots);x(r).then((function(t){e.plugIn(t,a.questionBank[a.currentRound-1].questionText,a)}))}else a.roundOver=!0,k(a)},e.changeTotalRounds=function(t){e.setState({totalRounds:t})},e.startGame=function(){R(e.props.roomCode).then((function(t){if(t.val()){var a=t.val();a.totalRounds=e.state.totalRounds,a.currentRound=1,a.roundOver=!1,b.database().ref("/questionBank/").once("value",(function(t){if(t.val()){for(var s=t.val(),n=[];n.length!==a.totalRounds;){0===Object.keys(s).length&&(s=t.val());var o=Math.floor(Math.random()*(Object.keys(s).length-1));s[o]&&(n.push(s[o]),delete s[o])}a.questionBank=n;var r=e.randomSelector(a.participants,a.questionBank[a.currentRound-1].slots);x(r).then((function(t){e.plugIn(t,a.questionBank[a.currentRound-1].questionText,a)})),k(a)}}))}}))},e}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,b.database().ref("/rooms/"+this.props.roomCode).on("value",(function(t){if(e.mounted){var a=t.val();if(a){if(a.waitingForPlayers&&a.participants.length>=O.min_players&&(a.waitingForPlayers=!1,e.setState({room:a},e.newRound)),a.participants.length<O.min_players&&a.currentRound>0&&!a.waitingForPlayers){var s;if(a.hasOwnProperty("waiting"))(s=a.participants).push.apply(s,Object(M.a)(a.waiting)),a.waiting=[];a.waitingForPlayers=!0,k(a),e.setState({room:a})}else e.setState({room:a,waiting:a.hasOwnProperty("waiting")&&a.waiting.some((function(t){return t.uid===e.props.userCode}))});var n,o=Object(F.a)(a.participants);try{for(o.s();!(n=o.n()).done;){var r=n.value;r.uid===e.props.userCode&&e.setState({participant:r})}}catch(i){o.e(i)}finally{o.f()}}else e.props.leaveRoom()}}))}},{key:"render",value:function(){return Object(s.jsxs)("div",{className:"container",children:[this.state.waiting&&Object(s.jsx)(_,{roomCode:this.props.roomCode,userCode:this.props.userCode},"waitinglounge"+this.props.userCode+this.props.roomCode),(0===this.state.room.currentRound||this.state.room.participants.length<O.min_players)&&!this.state.waiting&&Object(s.jsx)(q,{roomCode:this.props.roomCode,userCode:this.props.userCode,leaveRoom:this.props.leaveRoom,changeTotalRounds:this.changeTotalRounds},"pregamelounge"+this.props.userCode+this.props.roomCode),this.state.room.currentRound>0&&this.state.room.participants.length>=O.min_players&&!this.state.waiting&&this.state.room.questionBank.length!==this.state.room.totalRounds&&Object(s.jsx)(B,{children:"starting game"},"loadingtext"+this.props.userCode+this.props.roomCode),"dummy"!==this.state.participant.currentAnswer.answerText&&this.state.room.participants.length>=O.min_players&&!this.state.waiting&&!this.state.room.allAnswersSubmitted&&Object(s.jsx)(D,{roomCode:this.props.roomCode,userCode:this.props.userCode},"postanswerlounge"+this.props.userCode+this.props.roomCode),"dummy"!==this.state.participant.currentAnswer.answerText&&this.state.room.participants.length>=O.min_players&&!this.state.waiting&&this.state.room.allAnswersSubmitted&&!this.state.participant.chosenAns&&Object(s.jsx)(G,{roomCode:this.props.roomCode,userCode:this.props.userCode},"AnswerPickLounge"+this.props.userCode+this.props.roomCode),"dummy"!==this.state.participant.currentAnswer.answerText&&this.state.room.participants.length>=O.min_players&&!this.state.waiting&&this.state.room.allAnswersSubmitted&&!this.state.room.allAnswersPicked&&this.state.participant.chosenAns&&Object(s.jsx)(U,{roomCode:this.props.roomCode,userCode:this.props.userCode},"PostAnswerPickLounge"+this.props.userCode+this.props.roomCode),"dummy"!==this.state.participant.currentAnswer.answerText&&this.state.room.participants.length>=O.min_players&&!this.state.waiting&&this.state.participant.readyForNextRound&&!this.state.room.allReadyForNextRound&&Object(s.jsx)(z,{roomCode:this.props.roomCode,userCode:this.props.userCode},"PostReadyLounge"+this.props.userCode+this.props.roomCode),"dummy"!==this.state.participant.currentAnswer.answerText&&this.state.room.participants.length>=O.min_players&&!this.state.waiting&&this.state.room.allAnswersPicked&&!this.state.room.allReadyForNextRound&&!this.state.participant.readyForNextRound&&Object(s.jsx)(E,{roomCode:this.props.roomCode,userCode:this.props.userCode},"ScoreboardLounge"+this.props.userCode+this.props.roomCode),this.state.room.currentRound>0&&!this.state.room.roundOver&&this.state.room.questionBank.length===this.state.room.totalRounds&&this.state.room.participants.length>=O.min_players&&!this.state.waiting&&"dummy"===this.state.participant.currentAnswer.answerText&&Object(s.jsx)(L,{userCode:this.props.userCode,roomCode:this.props.roomCode},"Question"+this.props.userCode+this.props.roomCode),"dummy"!==this.state.room.code&&this.state.room.participants.length>=O.min_players&&this.state.room.roundOver&&!this.state.waiting&&Object(s.jsx)(J,{roomCode:this.props.roomCode}),Object(s.jsx)(T,{startGame:this.startGame,leaveRoom:this.props.leaveRoom,deleteRoom:this.props.deleteRoom,userCode:this.props.userCode,roomCode:this.props.roomCode,newRound:this.newRound},"controls"+this.props.userCode+this.props.roomCode)]})}}]),a}(n.Component),H=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={roomJoined:!1,roomCode:"dummy",loaded:!1},e.mounted=!1,e.onRoomCreate=function(t){e.mounted&&(e.setState({roomJoined:!0,roomCode:t}),g(e.props.userCode).then((function(e){var a=e.val();a&&(a.roomCode=t,f(a))})))},e.onRoomJoined=function(t){R(t).then((function(a){if(a.val()){var s=a.val();s.participants.some((function(t){return t.uid===e.props.userCode}))?e.setState({roomJoined:!0,roomCode:t}):(s.currentRound>0&&!s.waitingForPlayers?s.hasOwnProperty("waiting")?s.waiting.some((function(t){return t.uid===e.props.userCode}))||s.waiting.push(A(e.props.userCode)):s.waiting=[A(e.props.userCode)]:s.participants.push(A(e.props.userCode)),k(s).then((function(){e.setState({roomJoined:!0,roomCode:t})})))}})),g(e.props.userCode).then((function(e){var a=e.val();a&&(a.roomCode=t,f(a))}))},e.leaveRoom=function(){var t=e.state.roomCode;e.setState({roomJoined:!1,roomCode:"dummy"}),R(t).then((function(t){if(t.val()){var a=t.val();a.participants.some((function(t){return t.uid===e.props.userCode}))&&(a.participants=a.participants.filter((function(t){return t.uid!==e.props.userCode})),k(a)),a.hasOwnProperty("waiting")&&a.waiting.some((function(t){return t.uid===e.props.userCode}))&&(a.waiting=a.waiting.filter((function(t){return t.uid!==e.props.userCode})),k(a))}g(e.props.userCode).then((function(t){var a=t.val();a.roomCode="none",f(a).then((function(){e.mounted}))}))}))},e.deleteRoom=function(){b.database().ref("/rooms/"+e.state.roomCode).remove(),e.setState({roomJoined:!1,roomCode:"dummy"})},e}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,g(this.props.userCode).then((function(t){if(e.mounted){var a=t.val();a&&("none"!==a.roomCode?R(a.roomCode).then((function(t){if(e.mounted){var s=t.val();s&&(s.participants.some((function(t){return t.uid===e.props.userCode}))||s.waiting.some((function(t){return t.uid===e.props.userCode})))?e.setState({roomCode:a.roomCode,roomJoined:!0,loaded:!0}):(a.roomCode="none",f(a).then((function(){e.setState({loaded:!0})})))}})):e.setState({loaded:!0}))}}))}},{key:"render",value:function(){return Object(s.jsxs)("div",{className:"container",children:[!this.state.roomJoined&&this.state.loaded&&Object(s.jsx)(P,{userCode:this.props.userCode,onRoomCreate:this.onRoomCreate,onRoomJoined:this.onRoomJoined},"menu"+this.props.userCode+this.state.roomCode),this.state.roomJoined&&this.state.loaded&&Object(s.jsx)(Q,{userCode:this.props.userCode,roomCode:this.state.roomCode,leaveRoom:this.leaveRoom,deleteRoom:this.deleteRoom},"lounge"+this.props.userCode+this.state.roomCode),!this.state.loaded&&Object(s.jsx)(B,{children:"authenticated"})]})}}]),a}(n.Component),Y=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={loaded:!1,user:j()},e.mounted=!1,e}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,b.auth().onAuthStateChanged((function(t){e.mounted&&(t?b.database().ref("/users/"+e.props.userCode).on("value",(function(t){e.mounted&&(t.val()&&e.setState({user:t.val()}),e.setState({loaded:!0}))})):e.setState({loaded:!0}))}))}},{key:"render",value:function(){return Object(s.jsx)("div",{className:"mb-5",children:Object(s.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:[Object(s.jsx)("h2",{className:"navbar-brand",children:O.appName}),Object(s.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(s.jsx)("span",{className:"navbar-toggler-icon"})}),Object(s.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[Object(s.jsx)("div",{className:"mr-auto"}),Object(s.jsxs)("div",{className:"navbar-nav",children:["dummy"!==this.props.userCode&&this.state.loaded&&Object(s.jsxs)("div",{className:"nav-item dropdown",children:[Object(s.jsxs)("div",{className:"nav-link dropdown-toggle text-white",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:[this.state.user.firstName," ",this.state.user.lastName]}),Object(s.jsxs)("div",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"navbarDropdown",children:["Bz8fuRhVXKXH5HRf9hPnGuL9pwd2"===this.state.user.uid&&Object(s.jsx)("button",{className:"btn btn-link text-black dropdown-item",onClick:this.props.toggleQuestionForm,children:"Add Question"}),Object(s.jsx)("div",{className:"dropdown-divider"}),Object(s.jsx)("button",{className:"btn btn-link text-black dropdown-item",onClick:this.props.onSignOut,children:"Sign Out"})]})]}),"dummy"===this.props.userCode&&this.state.loaded&&this.props.visibilities.registerCompVisibility&&Object(s.jsx)("button",{className:"btn btn-link nav-link nav-item active",onClick:this.props.registerToLogin,children:"Sign In"}),"dummy"===this.props.userCode&&this.state.loaded&&this.props.visibilities.loginCompVisibility&&Object(s.jsx)("button",{className:"btn btn-link nav-link nav-item active",onClick:this.props.loginToRegister,children:"Sign Up"}),!this.state.loaded&&Object(s.jsx)("span",{className:"nav-item text-white",children:"loading..."})]})]})]})})}}]),a}(n.Component),K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dummy",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return{questionText:e,slots:t,answers:a}},Z=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={questionText:"",dollarCount:0},e.onQuestionChange=function(t){e.setState({questionText:t.target.value,dollarCount:t.target.value.split("$").length-1})},e.onSubmit=function(t){t.preventDefault();var a=K(e.state.questionText,e.state.dollarCount,[]);b.database().ref("totalQuestions").once("value",(function(e){b.database().ref("/questionBank/"+e.val()).set(a).then((function(){b.database().ref("totalQuestions").set(e.val()+1)}))}))},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(s.jsxs)("form",{className:"container",noValidate:!0,onSubmit:this.onSubmit,children:[Object(s.jsx)("input",{placeholder:"Question",className:"form-control",onChange:this.onQuestionChange}),Object(s.jsx)("br",{}),Object(s.jsxs)("h1",{className:"m-2 font-weight-light",children:["Number of dollars:",this.state.dollarCount]}),Object(s.jsx)("button",{type:"submit",className:"m-2 btn btn-primary",children:"Submit"})]})}}]),a}(n.Component),$=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={visibilities:{registerCompVisibility:!0,loginCompVisibility:!1},loadingVisible:!0,userCode:"dummy",questionFormVisible:!1},e.hasAuthenticated=function(){b.auth().onAuthStateChanged((function(t){t&&e.setState({userCode:t.uid}),e.setState({loadingVisible:!1})}))},e.registerToLogin=function(){e.setState({visibilities:{registerCompVisibility:!1,loginCompVisibility:!0}})},e.loginToRegister=function(){e.setState({visibilities:{registerCompVisibility:!0,loginCompVisibility:!1}})},e.toggleQuestionForm=function(){e.setState({questionFormVisible:!e.state.questionFormVisible})},e.onSignOut=function(){b.auth().signOut().then((function(){e.setState({isAuthenticated:!1})})).catch(),e.setState({userCode:"dummy"})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.hasAuthenticated()}},{key:"render",value:function(){return Object(s.jsxs)("div",{className:"mb-5",children:[Object(s.jsx)(Y,{onSignOut:this.onSignOut,registerToLogin:this.registerToLogin,loginToRegister:this.loginToRegister,visibilities:this.state.visibilities,userCode:this.state.userCode,toggleQuestionForm:this.toggleQuestionForm},"navbar"+this.state.userCode),Object(s.jsxs)("div",{className:"d-flex align-items-center container text-center vh-80",children:[this.state.questionFormVisible&&"dummy"!==this.state.userCode&&Object(s.jsx)(Z,{}),this.state.loadingVisible&&Object(s.jsx)(B,{children:"authenticating"}),"dummy"===this.state.userCode&&!this.state.loadingVisible&&Object(s.jsx)(C,{registerToLogin:this.registerToLogin,loginToRegister:this.loginToRegister,visibilities:this.state.visibilities,hasAuthenticated:this.hasAuthenticated}),"dummy"!==this.state.userCode&&!this.state.questionFormVisible&&!this.state.loadingVisible&&Object(s.jsx)(H,{userCode:this.state.userCode},"maingame"+this.state.userCode)]})]})}}]),a}(n.Component),X=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,41)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,o=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),o(e),r(e)}))};a(35),a(36),a(37);i.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)($,{})}),document.getElementById("root")),X()}},[[40,1,2]]]);
//# sourceMappingURL=main.67f3cd71.chunk.js.map